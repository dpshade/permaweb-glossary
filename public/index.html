<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Permaweb Glossary Search - Find and explore glossary terms">
    <meta name="theme-color" content="#3498db">
    <title>Permaweb Glossary Search</title>
    <link rel="stylesheet" href="/src/css/style.css">
    <!-- Favicon references -->
    <link rel="icon" href="/assets/favicons/favicon.ico" sizes="any">
    <link rel="icon" href="/assets/favicons/favicon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="/assets/favicons/apple-touch-icon.png">
    <link rel="manifest" href="/assets/favicons/site.webmanifest">
    <script src="https://cdn.jsdelivr.net/npm/flexsearch@0.7.31/dist/flexsearch.bundle.js"></script>
    <script>
        // Update title based on search query
        function updateTitle(query) {
            if (query) {
                document.title = `${query} - Permaweb Glossary`;
            } else {
                document.title = 'Permaweb Glossary Search';
            }
        }
        
        // Check for initial search query
        document.addEventListener('DOMContentLoaded', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const query = urlParams.get('q');
            if (query) {
                updateTitle(query);
            }
        });
    </script>
</head>
<body>
    <button class="theme-toggle" aria-label="Toggle dark mode">
        <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="5"></circle>
            <line x1="12" y1="1" x2="12" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="23"></line>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
            <line x1="1" y1="12" x2="3" y2="12"></line>
            <line x1="21" y1="12" x2="23" y2="12"></line>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
        </svg>
        <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
        </svg>
    </button>
    <div id="app">
        <div class="search-container">
            <h1><a href="https://github.com/dpshade/permaweb-glossary" target="_parent" style="text-decoration: none; color: var(--ao-heading-color);">Permaweb Glossary</a></h1>
            <div class="search-input">
                <input 
                    type="text" 
                    id="searchInput" 
                    placeholder="Search glossary terms..." 
                    autocomplete="off"
                    aria-autocomplete="list"
                    aria-controls="results"
                    role="combobox"
                    aria-expanded="false"
                >
                <div id="results" role="listbox"></div>
            </div>
            <!-- Random term tags will be inserted here via JavaScript -->
            <div id="loading-status">
                <p>Loading glossary data...</p>
                <div class="loader"></div>
            </div>
        </div>
    </div>
    <script type="module" src="/src/js/keyboard-nav.js"></script>
    <script type="module" src="/src/js/main.js"></script>
    <script>
        // Analytics initialization - just copy this entire script tag to any project
        (function() {
          // Configuration
          const ANALYTICS_CONFIG = {
            src: 'https://analytics_arlink.ar.io/browser.js',
            processId: 'E3rrhh4WGl-XmjaEFA8QVnVUte9xh0R-tY78JuWw3BU',
            trackUrlHashes: true,
            debug: false
          };
    
          // Wait for DOM to be ready
          function init() {
            const script = document.createElement('script');
            script.type = 'module';
            script.src = ANALYTICS_CONFIG.src;
            script.setAttribute('data-process-id', ANALYTICS_CONFIG.processId);
            script.setAttribute('data-track-url-hashes', ANALYTICS_CONFIG.trackUrlHashes);
            script.setAttribute('data-debug', ANALYTICS_CONFIG.debug);
            document.body.appendChild(script);
          }
    
          // Handle different loading states
          if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
          } else {
            init();
          }
        })();
      </script>
</body>
</html> 